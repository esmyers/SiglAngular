var SIGL;!function(e){var t=function(){function e(e,t,o,r){this.$stateProvider=e,this.$urlRouterProvider=t,this.$locationProvider=o,this.$logProvider=r,this.$stateProvider.state("main",{url:"/?rcode&workspaceID",template:"<ui-view/>",views:{map:{templateUrl:"Views/mapview.html",controller:"SIGL.Controllers.MapController"},sidebar:{templateUrl:"Views/sidebarview.html",controller:"SIGL.Controllers.SidebarController"},navbar:{templateUrl:"Views/navigationview.html",controller:"SIGL.Controllers.NavbarController"}}}),this.$urlRouterProvider.otherwise("/"),this.$locationProvider.html5Mode(!0),this.$logProvider.debugEnabled(!1)}return e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider","$logProvider"],e}();angular.module("SIGL",["ui.router","ui.bootstrap","ui.checkbox","mobile-angular-ui","angulartics","angulartics.google.analytics","toaster","ngAnimate","ngFileUpload","leaflet-directive","SIGL.Services","SIGL.Controllers","WiM.Services","WiM.Event","wim_angular","angularResizable","isteven-multi-select"]).config(t)}(SIGL||(SIGL={}));var SIGL;!function(e){var t;!function(e){var t=function(){function e(){}return e.FromJson=function(t){if(!t)return null;var o=t.hasOwnProperty("properties")?t.properties:null,r=new e;return r.siteNO=o.hasOwnProperty("SITE_NO")?o.SITE_NO:"---",r.siteName=o.hasOwnProperty("SITE_NAME")?o.SITE_NAME:"---",r.measurement=o.hasOwnProperty("LATEST_VALUE")?o.LATEST_VALUE:Number.NaN,r.measurementDate=o.hasOwnProperty("LATEST_DATE")?o.LATEST_DATE:null,r.wellDepth=o.hasOwnProperty("WELL_DEPTH")?o.WELL_DEPTH:Number.NaN,r.localAquiferName=o.hasOwnProperty("LOCAL_AQUIFER_NAME")?o.LOCAL_AQUIFER_NAME:"---",r.stateName=o.hasOwnProperty("STATE_NM")?o.STATE_NM:"---",r.countyName=o.hasOwnProperty("COUNTY_NM")?o.COUNTY_NM:"---",r.geometry=t.hasOwnProperty("geometry")?o.geometry:null,r},e}();e.GroundWaterSite=t}(t=e.Models||(e.Models={}))}(SIGL||(SIGL={}));var SIGL;!function(e){var t;!function(e){var t=function(){function e(e,t){this.Name=e,this.Type=t}return e}();e.GroundWaterFilterSite=t,function(e){e[e.STATE=1]="STATE",e[e.COUNTY=2]="COUNTY",e[e.AQUIFER=3]="AQUIFER"}(e.FilterType||(e.FilterType={}));e.FilterType}(t=e.Models||(e.Models={}))}(SIGL||(SIGL={})),function(){"use strict";angular.module("SIGL.Services",[])}();var SIGL;!function(e){var t;!function(e){"use strict";function t(e){return new o(e)}var o=function(){function e(e){this.modal=e}return e.prototype.openModal=function(e,t){void 0===t&&(t=null),t&&(this.modalOptions=t),this.modal.open(this.getModalSettings(e))},e.prototype.getModalSettings=function(e){try{switch(e){case r.e_filter:return{templateUrl:"Views/filtermodal.html",controller:"SIGL.Controllers.FilterModalController",size:"lg",backdropClass:"backdropZ",backdrop:"static",windowClass:"windowZ"};case r.e_about:return{templateUrl:"Views/aboutmodal.html",controller:"SIGL.Controllers.AboutModalController",size:"lg",backdropClass:"backdropZ",backdrop:"static",windowClass:"windowZ"};case r.e_siteinfo:return{templateUrl:"Views/siteinfomodal.html",controller:"SIGL.Controllers.SiteInfoModalController",size:"lg",backdropClass:"backdropZ",backdrop:"static",windowClass:"windowZ"};default:return{templateUrl:"Views/aboutmodal.html",controller:"SIGL.Controllers.AboutModalController",size:"lg",backdropClass:"backdropZ",backdrop:"static",windowClass:"windowZ"}}}catch(t){return!1}},e}();!function(e){e[e.e_filter=1]="e_filter",e[e.e_about=2]="e_about",e[e.e_siteinfo=3]="e_siteinfo"}(e.ModalType||(e.ModalType={}));var r=e.ModalType;t.$inject=["$modal"],angular.module("SIGL.Services").factory("SIGL.Services.ModalService",t)}(t=e.Services||(e.Services={}))}(SIGL||(SIGL={}));var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},SIGL;!function(e){var t;!function(e){"use strict";function t(e,t){return new o(e,t)}e.onSelectedGWSiteChanged="onSelectedGWSiteChanged";var o=function(e){function t(t,o){e.call(this,t,configuration.baseurls.SIGLServices),this.init()}return __extends(t,e),t.prototype.init=function(){this.loadParameterList(),this.loadResourceList()},t.prototype.loadParameterList=function(){var e=this,t="SiGLServices/parameters.json?GroupNames=",o=new WiM.Services.Helpers.RequestInfo(t);this.Execute(o).then(function(t){t.data&&(e.ParameterList=t.data,console.log(e.ParameterList))},function(e){console.log("No Parameters found")})["finally"](function(){})},t.prototype.loadResourceList=function(){var e=this,t="SiGLServices/resourceTypes",o=new WiM.Services.Helpers.RequestInfo(t);this.Execute(o).then(function(t){t.data&&(e.ResourceList=t.data,console.log(e.ResourceList))},function(e){console.log("No Resources found")})["finally"](function(){})},t}(WiM.Services.HTTPServiceBase);t.$inject=["$http","WiM.Event.EventManager"],angular.module("SIGL.Services").factory("SIGL.Services.SIGLService",t)}(t=e.Services||(e.Services={}))}(SIGL||(SIGL={})),function(){"use strict";angular.module("SIGL.Controllers",[])}();var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},SIGL;!function(e){var t;!function(t){"use strict";var o=function(){function e(){this.lat=0,this.lng=0}return e}(),r=function(){function e(e,t,o){this.lat=e,this.lng=t,this.zoom=o}return e}(),n=(function(){function e(e,t,o,r,n){void 0===n&&(n=void 0),this.name=e,this.url=t,this.type=o,this.visible=r,this.layerOptions=n}return e}(),function(){function e(e,t,o){void 0===e&&(e=null),void 0===t&&(t=null),void 0===o&&(o=!0),this.maxZoom=e,this.minZoom=t,this.zoomControl=o}return e}());t.onBoundingBoxChanged="onBoundingBoxChanged";var i=function(e){function t(t,o){e.call(this),this.zoomlevel=o,this.northern=t.northEast.lng,this.southern=t.southWest.lng,this.eastern=t.northEast.lat,this.western=t.southWest.lat}return __extends(t,e),t}(WiM.Event.EventArgs);t.BoundingBoxChangedEventArgs=i;var s=function(){function s(o,r,n,i,s,a,l,c,u,d,p,h){var v=this;this.$scope=o,this.initialized=!1,this.center=null,this.layers=null,this.mapDefaults=null,this.mapPoint=null,this.bounds=null,this.markers=null,this.geojson=null,this.events=null,this.layercontrol=null,this.regionLayer=null,o.vm=this,this.init(),this.toaster=r,this.angulartics=n,this.searchService=c,this.$locationService=i,this.leafletBoundsHelperService=a,this.leafletData=l,this.eventManager=u,this.siglServices=d,this.modalService=p,this.SiteListEnabled=!0,this.eventManager.AddEvent(t.onBoundingBoxChanged),this.eventManager.SubscribeToEvent(WiM.Directives.onLayerChanged,new WiM.Event.EventHandler(function(e,t){v.onLayerChanged(e,t)})),this.eventManager.SubscribeToEvent(WiM.Services.onSelectedAreaOfInterestChanged,new WiM.Event.EventHandler(function(e,t){v.onSelectedAreaOfInterestChanged(e,t)})),o.$on("leafletDirectiveMap.mousemove",function(e,t){var o=t.leafletEvent.latlng;v.mapPoint.lat=o.lat,v.mapPoint.lng=o.lng}),o.$on("leafletDirectiveMap.drag",function(e,t){v.cursorStyle="grabbing"}),o.$on("leafletDirectiveMap.dragend",function(e,t){v.cursorStyle="pointer"}),o.$watch(function(){return v.bounds},function(e,t){return v.mapBoundsChange(t,e)}),o.$on("leafletDirectiveMap.click",function(t,o){v.modalService.openModal(e.Services.ModalType.e_siteinfo),v.leafletData.getMap().then(function(e){e.getBounds().toBBoxString(),Math.round(e.layerPointToContainerPoint(o.leafletEvent.layerPoint).x),Math.round(e.layerPointToContainerPoint(o.leafletEvent.layerPoint).y),e.getSize().x,e.getSize().y})}),o.$watch(function(){return v.bounds},function(e,t){return v.mapBoundsChange(t,e)}),o.$watch(function(){return v.SiteList},function(e,t){e.length>0?v.SiteListEnabled=!0:v.SiteListEnabled=!0}),h(function(){v.leafletData.getMap().then(function(e){e.invalidateSize()})}),this.initialized=!0}return s.prototype.init=function(){this.cursorStyle="pointer",this.center=new r(44.8,-85.5,6),this.nominalZoomLevel=this.scaleLookup(this.center.zoom),this.layers={baselayers:configuration.basemaps,overlays:configuration.overlayedLayers},this.mapDefaults=new n(null,3,!0),this.markers={},this.geojson={},this.regionLayer={},this.controls={scale:!0,draw:{draw:{polygon:!1,polyline:!1,rectangle:!1,circle:!1,marker:!1}},custom:new Array(L.control.locate({follow:!1,locateOptions:{maxZoom:15}}),L.control.elevation({imperial:!0}))},this.events={map:{enable:["mousemove"]}},this.mapPoint=new o,L.Icon.Default.imagePath="images"},s.prototype.scaleLookup=function(e){switch(e){case 19:return"1,128";case 18:return"2,256";case 17:return"4,513";case 16:return"9,027";case 15:return"18,055";case 14:return"36,111";case 13:return"72,223";case 12:return"144,447";case 11:return"288,895";case 10:return"577,790";case 9:return"1,155,581";case 8:return"2,311,162";case 7:return"4,622,324";case 6:return"9,244,649";case 5:return"18,489,298";case 4:return"36,978,596";case 3:return"73,957,193";case 2:return"147,914,387";case 1:return"295,828,775";case 0:return"591,657,550"}},s.prototype.initiateStreamgageQuery=function(){console.log("initiateStreamgageQuery(), mapcontroller.ts ln 346")},s.prototype.drawController=function(e,t){var o=this;return t?void this.leafletData.getMap().then(function(t){o.drawControl=new L.Draw.Polyline(t,e),o.drawControl.enable()}):(this.drawControl.disable(),void(this.drawControl=void 0))},s.prototype.showLocation=function(){var e;this.controls.custom.forEach(function(t){t._container.className.indexOf("leaflet-control-locate")>-1&&(e=t)}),e.start()},s.prototype.resetMap=function(){this.removeOverlayLayers("_region",!0),this.center=new r(39,-100,3)},s.prototype.onSelectedGWSiteChanged=function(){this.modalService.openModal(e.Services.ModalType.e_siteinfo)},s.prototype.onSelectedAreaOfInterestChanged=function(e,t){this.angulartics.eventTrack("Search",{category:"Sidebar"}),this.markers={};var o=t.selectedAreaOfInterest;if("U.S. State or Territory"==o.Category)var r=9;else var r=14;this.markers.AOI={lat:o.Latitude,lng:o.Longitude,message:o.Name,focus:!0,draggable:!1},this.leafletData.getMap().then(function(e){e.setView([o.Latitude,o.Longitude],r)})},s.prototype.removeGeoJson=function(e){void 0===e&&(e="");for(var t in this.geojson)"function"!=typeof this.geojson[t]&&(delete this.geojson[t],this.eventManager.RaiseEvent(WiM.Directives.onLayerRemoved,this,new WiM.Directives.LegendLayerRemovedEventArgs(t,"geojson")))},s.prototype.addGeoJSON=function(e,t){},s.prototype.onLayerChanged=function(e,t){if("visible"===t.PropertyName)if(t.Value);else delete this.geojson[t.LayerName]},s.prototype.mapBoundsChange=function(e,o){e!==o&&(this.nominalZoomLevel=this.scaleLookup(this.center.zoom),this.eventManager.RaiseEvent(t.onBoundingBoxChanged,this,new i(this.bounds,this.center.zoom)))},s.prototype.removeOverlayLayers=function(e,t){var o=this;void 0===t&&(t=!1);var r;r=this.getLayerIdsByID(e,this.layers.overlays,t),r.forEach(function(e){delete o.layers.overlays[e]})},s.prototype.getLayerIdsByName=function(e,t,o){var r=[];for(var n in t)t[n].hasOwnProperty("name")&&(o?t[n].name.indexOf(e)>-1:t[n].name===e)&&r.push(n);return r},s.prototype.getLayerIdsByID=function(e,t,o){var r=[];for(var n in t)(o?n.indexOf(e)>-1:n===e)&&r.push(n);return r},s.$inject=["$scope","toaster","$analytics","$location","$stateParams","leafletBoundsHelpers","leafletData","WiM.Services.SearchAPIService","WiM.Event.EventManager","SIGL.Services.SIGLService","SIGL.Services.ModalService","$timeout"],s}();angular.module("SIGL.Controllers").controller("SIGL.Controllers.MapController",s)}(t=e.Controllers||(e.Controllers={}))}(SIGL||(SIGL={}));var SIGL;!function(e){var t;!function(t){"use strict";var o,r=function(){function t(e,t,o,r,n,i){e.vm=this,this.toaster=t,this.angulartics=o,this.searchService=r,this.SIGLServices=i,this.modalService=n,this.init()}return t.prototype.getLocations=function(e){return this.searchService.getLocations(e)},t.prototype.setProcedureType=function(e){this.selectedProcedure!=e&&this.canUpdateProcedure(e)&&(this.selectedProcedure=e)},t.prototype.toggleSideBar=function(){this.sideBarCollapsed?this.sideBarCollapsed=!1:this.sideBarCollapsed=!0},t.prototype.zoomRegion=function(e){angular.fromJson(e)},t.prototype.startSearch=function(e){e.stopPropagation(),e.preventDefault(),$("#sapi-searchTextBox").trigger($.Event("keyup",{keyCode:13}))},t.prototype.removeFilter=function(e){var t=this.SelectedFilters.indexOf(e);this.SelectedFilters.splice(t)},t.prototype.ClearFilters=function(){this.SelectedFilters.splice(0,this.SelectedFilters.length)},t.prototype.AddFilter=function(){this.modalService.openModal(e.Services.ModalType.e_filter)},t.prototype.checkArrayForObj=function(e,t){for(var o=0;o<e.length;o++)if(angular.equals(e[o],t))return o;return-1},t.prototype.resourceClick=function(e){console.log(e)},t.prototype.init=function(){this.sideBarCollapsed=!1,this.selectedProcedure=o.Search},t.prototype.canUpdateProcedure=function(e){try{switch(e){case o.Search:return!0;case o.NetworkType:return!0;case o.Filter:return!0;default:return!1}}catch(t){return!1}},t.prototype.sm=function(e){try{}catch(t){}},t.$inject=["$scope","toaster","$analytics","WiM.Services.SearchAPIService","SIGL.Services.ModalService","SIGL.Services.SIGLService"],t}();!function(e){e[e.Search=1]="Search",e[e.NetworkType=2]="NetworkType",e[e.Filter=3]="Filter"}(o||(o={})),angular.module("SIGL.Controllers").controller("SIGL.Controllers.SidebarController",r)}(t=e.Controllers||(e.Controllers={}))}(SIGL||(SIGL={}));var SIGL;!function(e){var t;!function(t){"use strict";var o=function(){function t(e,t){e.vm=this,this.modalService=t}return Object.defineProperty(t.prototype,"ProjectName",{get:function(){return configuration.projectName},enumerable:!0,configurable:!0}),t.prototype.openAboutModal=function(){this.modalService.openModal(e.Services.ModalType.e_about)},t.$inject=["$scope","SIGL.Services.ModalService"],t}();angular.module("SIGL.Controllers").controller("SIGL.Controllers.NavbarController",o)}(t=e.Controllers||(e.Controllers={}))}(SIGL||(SIGL={}));var SIGL;!function(e){var t;!function(t){"use string";var o=function(){function t(e,t,o){e.vm=this,this.modalInstance=t,this.SIGLService=o,this.init()}return t.prototype.Close=function(){this.modalInstance.dismiss("cancel")},t.prototype.AddStateFilter=function(t){this.SelectedStates.push(new e.Models.GroundWaterFilterSite(t,e.Models.FilterType.STATE))},t.prototype.AddCountyFilter=function(t){this.SelectedCounties.push(new e.Models.GroundWaterFilterSite(t,e.Models.FilterType.COUNTY))},t.prototype.AddAquiferFilter=function(t){this.SelectedAquifers.push(new e.Models.GroundWaterFilterSite(t,e.Models.FilterType.AQUIFER))},t.prototype.init=function(){this.SelectedAquifers=[],this.SelectedCounties=[],this.SelectedStates=[]},t.$inject=["$scope","$modalInstance","SIGL.Services.SIGLService"],t}();angular.module("SIGL.Controllers").controller("SIGL.Controllers.FilterModalController",o)}(t=e.Controllers||(e.Controllers={}))}(SIGL||(SIGL={}));var SIGL;!function(e){var t;!function(e){"use string";var t=function(){function e(e,t){e.vm=this,this.modalInstance=t,this.init()}return e.prototype.Close=function(){this.modalInstance.dismiss("cancel")},e.prototype.init=function(){},e.$inject=["$scope","$modalInstance"],e}();angular.module("SIGL.Controllers").controller("SIGL.Controllers.AboutModalController",t)}(t=e.Controllers||(e.Controllers={}))}(SIGL||(SIGL={}));var __extends=this&&this.__extends||function(e,t){function o(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)},SIGL;!function(e){var t;!function(e){"use string";var t=function(e){function t(t,o,r,n,i,s){e.call(this,o,configuration.baseurls.SIGL),t.vm=this,this.sce=r,this.modalInstance=n,this.siglServices=i,this.eventManager=s,this.siteLoaded=!1,this.init()}return __extends(t,e),t.prototype.Close=function(){this.modalInstance.dismiss("cancel")},t.prototype.convertUnsafe=function(e){return console.log("converting..."),this.sce.trustAsHtml(e)},t.prototype.replaceAll=function(e,t,o){return e.replace(new RegExp(t,"g"),o)},t.prototype.getOldGWWpage=function(){var e=this;this.pagecontent="";var t=" ",o=new WiM.Services.Helpers.RequestInfo(t,!0);this.Execute(o).then(function(t){if(e.siteLoaded=!0,t.data.indexOf("dws_maps")>0){var o=t.data.replace('<table border="0" cellpadding="3" cellspacing="0" width="950px">','<table border="0" cellpadding="3" cellspacing="0" width="950px" style="display:none;">');o=o.replace('<div id="usgsfooter">','<div id="usgsfooter" style="display:none;">'),o=e.replaceAll(o,"iframe","div"),o=e.replaceAll(o,'<td valign="top" width="550">','<td valign="top" width="550" style="display:none;">'),o=e.replaceAll(o,'src="../','src="http://groundwaterwatch.usgs.gov/'),o=e.replaceAll(o,'src="images/','src="http://groundwaterwatch.usgs.gov/images/'),o=e.replaceAll(o,'src="../images/','src="http://groundwaterwatch.usgs.gov/images/'),o=e.replaceAll(o,'src="BandPlots-small/','src="http://groundwaterwatch.usgs.gov/BandPlots-small/'),o=e.replaceAll(o,'src="DVPlotsSmall/','src="http://groundwaterwatch.usgs.gov/DVPlotsSmall/'),o=e.replaceAll(o,'src="wlplotssmall/','src="http://groundwaterwatch.usgs.gov/wlplotssmall/'),o=e.replaceAll(o,'src="plots-prsmall/','src="http://groundwaterwatch.usgs.gov/plots-prsmall/'),o=e.replaceAll(o,'color="red"','color="black"'),e.pagecontent=o}else console.log("No page found for this site")},function(e){console.log("No gww sites found")})["finally"](function(){})},t.prototype.init=function(){this.pagecontent=""},t.$inject=["$scope","$http","$sce","$modalInstance","SIGL.Services.SIGLService","WiM.Event.EventManager"],t}(WiM.Services.HTTPServiceBase);angular.module("SIGL.Controllers").controller("SIGL.Controllers.SiteInfoModalController",t)}(t=e.Controllers||(e.Controllers={}))}(SIGL||(SIGL={}));